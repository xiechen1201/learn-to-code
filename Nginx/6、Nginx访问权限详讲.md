
在工作中，访问权限的控制需求更加复杂，例如，对于网站下的 img 是运行所有用户访问，但对于网站下的admin目录则只允许公司内部固定IP访问。这时候仅靠deny和allow这两个指令，是无法实现的。我们需要location块来完成相关的需求匹配。

## 使用 = 进行匹配

= 号代表精确匹配，使用了 = 后是根据其后的模式进行精确匹配。

```bash
location = /img{
        # 容许所有用户访问
        allow all;
}
location = /admin{
        # 所有人都禁止访问
        deny all;
}
```

## 使用正则表达式进行匹配

只有精确匹配有时是完不成我们的工作任务的，比如现在我们要禁止访问所有php的页面，php的页面大多是后台的管理或者接口代码，所以为了安全我们经常要禁止所有用户访问，而只开放公司内部访问的。


```bash
# location 后面没有 =
# ~ 表示正则开始 
# $ 表示正则结束
location ~\.php$ {
    deny all;
}
```